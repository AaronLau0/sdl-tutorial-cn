<!DOCTYPE html>
<html>
 <head> 
  <meta charset="utf-8" /> 
  <title>第7课 - True Type字体 &middot; SDL中文教程</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <meta name="description" content="" /> 
  <meta name="author" content="" /> 
  <!-- Le styles --> 
  <link href="../../assets/css/bootstrap.css" rel="stylesheet" /> 
  <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet" /> 
  <link href="../../assets/css/docs.css" rel="stylesheet" /> 
  <link href="../../assets/js/google-code-prettify/prettify.css" rel="stylesheet" /> 
  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --> 
  <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 
  <!-- Le fav and touch icons --> 
  <link rel="shortcut icon" href="../../assets/ico/favicon.ico" /> 
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../assets/ico/apple-touch-icon-144-precomposed.png" /> 
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../assets/ico/apple-touch-icon-114-precomposed.png" /> 
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../assets/ico/apple-touch-icon-72-precomposed.png" /> 
  <link rel="apple-touch-icon-precomposed" href="../../assets/ico/apple-touch-icon-57-precomposed.png" /> 
 </head> 
 <body data-spy="scroll" data-target=".subnav" data-offset="50">
   ﻿ 
  <!-- Navbar
    ================================================== --> 
  <div class="navbar navbar-fixed-top"> 
   <div class="navbar-inner"> 
    <div class="container"> 
     <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="brand" href="../../index.html">SDL中文教程</a> 
     <div class="nav-collapse collapse"> 
      <ul class="nav"> 
       <li class=""><a href="../../index.html">简介</a></li> 
       <li class=""><a href="../../contents.html">目录</a></li> 
       <li class=""><a href="../../about.html">关于</a></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="container"> 
   <div class="row"> 
    <div class="span10 offset1"> 
     <h1 align="center" id="content_title">第7课 - True Type字体</h1> 
     <br /> 
     <p align="center"> <span class="label label-info">更新时间：2012年6月21日</span> </p> 
     <ul class="quick-links"> 
      <li><a class="btn btn-info" target="_blank" id="origin_link" href="http://lazyfoo.net/SDL_tutorials/lesson07/index.php">原文链接</a></li> 
      <li><a class="btn" href="../lesson06/index.html" id="prev_link">上一课</a></li> 
      <li><a class="btn" href="../lesson08/index.html" id="next_link">下一课</a></li> 
     </ul> 
     <hr /> 
    </div> 
   </div> 
   <!-- Main contents start from here --> 
   <div class="row"> 
    <div class="well span10 offset1"> 
     <div class="alert alert-warning"> 
      <strong>译者注：</strong>本页面还未完成翻译，如有兴趣参与本项目，请 
      <strong><a href="../../about.html">联系我</a></strong>！ 
     </div> 
     <div class="content">
      <div class="tutPreface"> 
       <h1 class="tutHead">True Type Fonts</h1> 
       <div class="tutImg"> 
        <img src="preview.jpg" /> 
       </div> 
       <h6>Last Updated 12/31/10</h6> Now it's time to render text. SDL does not support *.ttf files natively so the SDL_ttf extension library is needed. SDL_ttf is an extension library that allows you to generate surfaces from true type fonts. 
       <br /> 
       <br /> You can get SDL_ttf from 
       <a class="tutLink" href="../../../www.libsdl.org/projects/SDL_ttf/default.htm">here</a>. 
       <br /> 
       <br /> To install SDL_ttf just follow the 
       <a class="tutLink" href="../lesson03/index.php">extension library tutorial</a>. Installing SDL_ttf is done pretty much the way SDL_image is, so just replace where you see SDL_image with SDL_ttf. 
       <br /> 
       <br /> *nix users may also have to link against freetype. 
       <br /> 
       <br /> This tutorial covers the basics of using SDL_ttf. 
      </div> 
      <pre class="tutCode prettyprint linenums:1 lang-cpp">//The surfaces
SDL_Surface *background = NULL;
SDL_Surface *message = NULL;
SDL_Surface *screen = NULL;

//The event structure
SDL_Event event;

//The font that's going to be used
TTF_Font *font = NULL;

//The color of the font
SDL_Color textColor = { 255, 255, 255 };
</pre> 
      <div class="tutText">
        Here we have our variables. There's the background and screen surface and the event structure from before. We also have the &quot;message&quot; surface which will hold the surface with the text. 
       <br /> 
       <br /> There's also the new data type &quot;TTF_Font&quot; which is the font we're going to use, and there's also the SDL_Color which is the color we are going to render the text. In this case it is set to white. 
       <br /> 
       <br /> If you want to know more about the SDL_Color data type, you can look it up in the SDL documentation. 
      </div> 
      <pre class="tutCode prettyprint linenums:14 lang-cpp">bool init()
{
    //Initialize all SDL subsystems
    if( SDL_Init( SDL_INIT_EVERYTHING ) == -1 )
    {
        return false;    
    }
    
    //Set up the screen
    screen = SDL_SetVideoMode( SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_BPP, SDL_SWSURFACE );
    
    //If there was an error in setting up the screen
    if( screen == NULL )
    {
        return false;    
    }
    
    //Initialize SDL_ttf
    if( TTF_Init() == -1 )
    {
        return false;    
    }
    
    //Set the window caption
    SDL_WM_SetCaption( &quot;TTF Test&quot;, NULL );
    
    //If everything initialized fine
    return true;
}
</pre> 
      <div class="tutText">
        Here's our initialization function. It's pretty much the same as before but this time we have to initialize SDL_ttf. 
       <br /> 
       <br /> SDL_ttf is initialized by calling TTF_Init(). TTF_Init() returns -1 when there is an error. 
       <br /> 
       <br /> TTF_Init() has to be called before using any SDL_ttf functions. 
      </div> 
      <pre class="tutCode prettyprint linenums:43 lang-cpp">bool load_files()
{
    //Load the background image
    background = load_image( &quot;background.png&quot; );
    
    //Open the font
    font = TTF_OpenFont( &quot;lazy.ttf&quot;, 28 );
    
    //If there was a problem in loading the background
    if( background == NULL )
    {
        return false;    
    }
    
    //If there was an error in loading the font
    if( font == NULL )
    {
        return false;
    }
    
    //If everything loaded fine
    return true;    
}
</pre> 
      <div class="tutText">
        Here's the file loading function. To load the *.ttf font, TTF_OpenFont() must be called. 
       <br /> 
       <br /> The first argument of TTF_OpenFont() is the filename of the *.ttf font you want to open, the second argument is the size you want to set the font to when you open it. 
       <br /> 
       <br /> When there's an error loading the font, TTF_OpenFont() will return NULL. 
      </div> 
      <pre class="tutCode prettyprint linenums:66 lang-cpp">    //Render the text
    message = TTF_RenderText_Solid( font, &quot;The quick brown fox jumps over the lazy dog&quot;, textColor );
    
    //If there was an error in rendering the text
    if( message == NULL )
    {
        return 1;    
    }
    
    //Apply the images to the screen
    apply_surface( 0, 0, background, screen );
    apply_surface( 0, 150, message, screen );
    
    //Update the screen
    if( SDL_Flip( screen ) == -1 )
    {
        return 1;    
    }
</pre> 
      <div class="tutText">
        Here's the rendering code inside the main() function. 
       <br /> 
       <br /> The fastest way to render text is to use TTF_RenderText_Solid(). 
       <br /> 
       <br /> TTF_RenderText_Solid() takes the font in the first argument, and creates a surface with the text in the second argument with the color in the third argument. TTF_RenderText_Solid() returns NULL when there's an error. 
       <br /> 
       <br /> There are other ways to render text, check them out in the 
       <a class="tutLink" href="../../../jcatki.no-ip.org/SDL_ttf/SDL_ttf_html.tar.gz">SDL_ttf documentation</a>. For some Linux users TTF_RenderText_Solid() won't work, so make sure to upgrade freetype (the library SDL_ttf is based on) and SDL_ttf. If that doesn't work, try using TTF_RenderText_Shaded() instead. 
      </div> 
      <pre class="tutCode prettyprint linenums:84 lang-cpp">void clean_up()
{
    //Free the surfaces
    SDL_FreeSurface( background );
    SDL_FreeSurface( message );
    
    //Close the font that was used
    TTF_CloseFont( font );
    
    //Quit SDL_ttf
    TTF_Quit();
    
    //Quit SDL
    SDL_Quit();
}
</pre> 
      <div class="tutText">
        Here we have the clean up function. First we free the background surface, then get rid of the text surface we generated. 
       <br /> 
       <br /> We also close the font we opened using TTF_CloseFont(), and then quit SDL_ttf using TTF_Quit(). 
       <br /> 
       <br /> After that we quit SDL as usual. 
      </div> 
      <div class="tutFooter">
        Download the media and source code for this tutorial 
       <a class="tutLink" href="../../downloads/index.php@file=SDLTut_lesson07">here</a>. 
       <br /> 
       <br /> I highly recommend that you download the 
       <a class="tutLink" href="../../../jcatki.no-ip.org_3A8080/SDL_ttf/SDL_ttf_html.tar.gz">SDL_ttf documentation</a>, and keep it around for reference. 
       <br /> 
       <br /> 
       <a class="leftNav" href="../lesson06/index.php">Previous Tutorial</a> 
       <a class="rightNav" href="../lesson08/index.php">Next Tutorial</a> 
       <br /> 
      </div>
     </div> 
    </div> 
   </div> 
   <!-- End of main contents--> 
   <!-- Footer
      ================================================== --> 
   <footer class="footer"> 
    <p class="pull-right"> <a href="#">返回页首</a> </p> 
    <p> 翻译及网站编辑：<a href="../../about.html">tjumyk</a>.<br /> 由来自Twitter的<a href="http://getbootstrap.com" target="_blank">Bootstrap </a>强力驱动. </p> 
    <p> 所有内容采用<a target="_blank" href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>许可. </p> 
    <p> 引用图标来自<a target="_blank" href="http://glyphicons.com">Glyphicons Free</a>, 采用 <a target="_blank" href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>许可. </p> 
   </footer> 
  </div> 
  <!-- /container --> 
  <!-- Le javascript
    ================================================== --> 
  <!-- Placed at the end of the document so the pages load faster --> 
  <script src="../../assets/js/jquery.js"></script> 
  <script src="../../assets/js/google-code-prettify/prettify.js"></script> 
  <script src="../../assets/js/bootstrap-transition.js"></script> 
  <script src="../../assets/js/bootstrap-alert.js"></script> 
  <script src="../../assets/js/bootstrap-modal.js"></script> 
  <script src="../../assets/js/bootstrap-dropdown.js"></script> 
  <script src="../../assets/js/bootstrap-scrollspy.js"></script> 
  <script src="../../assets/js/bootstrap-tab.js"></script> 
  <script src="../../assets/js/bootstrap-tooltip.js"></script> 
  <script src="../../assets/js/bootstrap-popover.js"></script> 
  <script src="../../assets/js/bootstrap-button.js"></script> 
  <script src="../../assets/js/bootstrap-collapse.js"></script> 
  <script src="../../assets/js/bootstrap-carousel.js"></script> 
  <script src="../../assets/js/bootstrap-typeahead.js"></script> 
  <script src="../../assets/js/application.js"></script>  
 </body>
</html>